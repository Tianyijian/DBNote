# 17. 数据库物理存储
重点与难点

- 理解利用磁盘组织大规模数据的基本思维
- 初步了解数据存储与查询实现的基本思想
- 理解三种文件组织方法及其特性：堆文件、顺序文件和散列文件
- 理解数据库重组的概念和作用

## 17.1 基础回顾-计算机系统的存储体系
- 存储体系——数据组织的基础
- 将不同性价比的存储器组织在一起，满足高速度、大容量、低价格的需求

## 17.2 磁盘的结构与特性
- 盘面、磁道、扇区、磁盘块、柱面
- 磁盘扇区读写时间：寻道时间、旋转时间、传输时间
- 一个磁盘的若干盘面可以同时旋转，位于不同盘面上的磁头可以同时移动。**一次磁盘操作可以一次性读写多个盘面上相同磁道位置的扇区**，即一次性读写多个扇区。
- 读写时间：
	- 最小时间：传输时间
	- 最大时间：旋转一周，寻道最内到最外，传输时间
	- 平均时间：旋转半周，寻道1/3，传输时间
- 缩短磁盘读写数据的时间：
	- 将信息分块存储在同一磁道的连续扇区中
	- 将信息分块存储在不同盘面的相同柱面上
	- 将信息分块存储在多个磁盘上，多个磁盘同步工作
- RAID技术，独立磁盘冗余阵列，是提高数据读写正确性和速度的重要方法
	- 块级拆分，将一个文件的不同块存储在不同磁盘上，保证数据读写的快速性
	- 比特级拆分，将一个字节的不同位存储在不同磁盘上，保证数据读写的快速性
	- 互为校验盘，多个磁盘间互为校验盘，保证数据读写正确性


## 17.3 DBMS数据存储与查询实现的基本思想

## 17.4 数据库之表和记录与磁盘块的映射
- 定长记录、变长记录
- 非跨块存储、跨块存储
- 表占磁盘块的分配方法：连续、链接、按簇、索引

## 17.5 数据库之文件组织方法
- 无序记录文件
	- 当对**数据更新速度**有较高要求时，通常采用无序记录文件即堆文件来组织
	- 在**堆文件**组织结构中，记录通常是以输入顺序存储的
- 有序记录文件
	- **数据检索速度**有利
	- 在**顺序文件**组织结构中，记录通常是按照某一键值的顺序（升序或降序）存储。
- 散列文件
	- 如果要将一批记录均匀地存储在n个数据块中，应采用**散列文件**组织结构。
- 聚簇文件
- 数据库重组：频繁删增记录时会造成空间浪费，需要周期性重新组织数据库，是对数据表的**物理存储**进行调整
	- 在无序文件中，数据库重组是通过移走被删除的记录使有效记录连续存放，从而回收那些由删除记录而产生的未利用空间。
	- 在有序文件中，数据库重组 是将溢出文件合并到主文件中，并恢复主文件中的记录顺序。

## 17.6 习题
- 磁盘可以一个存储字一个存储字的读写。**错**。磁盘是机电装置，读写需要时间，**不能以存储字为单位(太小)进行读写**。
- 建立一个股票交易数据库，重在增删改数据的快速性，应采用堆文件(无序文件)来组织。
- DBMS既可以将若干个“表”的数据存储在一个文件中，又可以将一个“表”的数据存储在多个文件中
- 对数据表的结构进行调整——**数据库重构**